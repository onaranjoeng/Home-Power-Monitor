// LATEST UPDATE 4/2/2024

== HOME POWER MONITOR CONFIGURATION ==

--- Set up and install rasperry pi ---
download software onto SD card from laptop
insert SD card into raspberry and boot up
sudo raspi-config
enable ssh


--- Configure sensors ---
sudo apt-get install python-serial


--- Install php ---
sudo apt-get install php -y


--- Set up apache2 ---
sudo apt-get install apache2 -y

--- Install sqlite3 ---
sudo apt-get install php-sqlite3
sudo systemctl restart apache2


--- Find IP address ---
10.0.0.1 for gateway
10.0.0.223 for raspberry pi
127.0.0.1 internal IP
68.42.48.171 external IP


--- find out which program uses the serial port use the command below---
sudo fuser -v /dev/ttyAMA0
to kill it do: sudo kill 605 (number changes)

---- create the service ----
cd /etc/systemd/system/
THIS is the code for serial_daemon.service:
[Unit]
Description=Serial Daemon Service

[Service]
ExecStart=/usr/bin/python3 /var/www/html/serial_daemon.py
Restart=always
User=root

[Install]
WantedBy=multi-user.target
// end of code

NEXT:
Enable and Start the Service:
sudo systemctl enable serial_daemon.service
Start the service: 
sudo systemctl start serial_daemon.service

check if system is running: systemctl is-active serial_daemon.service

=== CONFIGURE sudo visudo ======

Monitor ALL=(ALL) NOPASSWD: /var/www/html/serial_daemon_service.py
root ALL=(ALL) NOPASSWD: /var/www/html/serial_daemon_service.py
www-data ALL=(ALL) NOPASSWD: /var/www/html/serial_daemon_service.py
www-data ALL=(ALL) NOPASSWD: /bin/python3
www-data ALL=(ALL) NOPASSWD: /usr/bin/pkill
www-data ALL=(ALL) NOPASSWD: /usr/bin/python3 /var/www/html/serial_daemon_service.py
www-data ALL=(ALL) NOPASSWD: /var/www/html/serial_daemon_service.py
www-data ALL=(ALL) NOPASSWD: /usr/bin/fuser

THEN give access to fuser:
sudo chmod +s /usr/bin/fuser
============================









